@model ass1Karan.Models.UserProfile
@{
    ViewData["Title"] = "User Profile";
}



<div class="container mt-5">
    <h2 class="text-center mb-4">👤 User Profile & Settings</h2>

    @if (TempData["Message"] != null)
    {
        <div class="alert alert-success text-center">@TempData["Message"]</div>
    }
    @if (TempData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger text-center">@TempData["ErrorMessage"]</div>
    }

    <div class="card profile-card">
        <div class="text-center">
            <img src="@(!string.IsNullOrEmpty(Model.ProfileImageUrl) ? Model.ProfileImageUrl : "/images/default-avatar.png")"
                 class="rounded-circle"
                 width="150" height="150" style="object-fit:cover;" />
        </div>

        <form asp-action="UpdateProfile" method="post" enctype="multipart/form-data">
            <div class="profile-grid">
                <div>
                    <label>Full Name</label>
                    <input type="text" class="form-control" name="FullName" value="@Model.FullName" />
                </div>
                <div>
                    <label>Email</label>
                    <input type="email" class="form-control" value="@ViewBag.Email" readonly />
                </div>
                <div>
                    <label>Profile Picture</label>
                    <input type="file" class="form-control" name="profileImage" />
                </div>
                <div>
                    <label>Joined Date</label>
                    <input type="text" class="form-control" value="@Model.JoinedDate.ToString("yyyy-MM-dd")" readonly />
                </div>
            </div>
            <div class="text-center">
                <button type="submit" class="btn btn-primary">💾 Save Changes</button>
            </div>
        </form>

        <hr />

        <h4>Change Password</h4>
        <form asp-action="ChangePassword" method="post">
            <div class="profile-grid">
                <div>
                    <label>Current Password</label>
                    <input type="password" class="form-control" name="currentPassword" required />
                </div>
                <div>
                    <label>New Password</label>
                    <input type="password" class="form-control" name="newPassword" required />
                </div>
                <div>
                    <label>Confirm New Password</label>
                    <input type="password" class="form-control" name="confirmPassword" required />
                </div>
            </div>
            <div class="text-center mt-3">
                <button type="submit" class="btn btn-warning">🔒 Change Password</button>
            </div>
        </form>
    </div>
</div>
